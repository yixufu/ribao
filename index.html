<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>早报图片生成器</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <img src="logo.png" alt="早报logo" class="logo" onerror="this.style.display='none'"> 
        <h1 class="main-title">早报图片生成器</h1>
    </div>

    <div class="container">
        <div class="editor-panel">
            <h2>早报内容编辑</h2>
            <div class="form-group">
                <label for="title">早报标题</label>
                <input type="text" id="title" value="AI新动向社群早报">
            </div>
            <div class="form-group">
                <label for="author">作者名称 (可选)</label>
                <input type="text" id="author" placeholder="留空则不显示">
            </div>
            <div class="form-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="show-date" checked>
                    <span>显示日期</span>
                </label>
            </div>
            <div class="form-group">
                <label>日期样式选择</label>
                <div class="radio-group">
                    <label class="radio-label">
                        <input type="radio" name="date-style" value="text" checked>
                        <span>文字样式</span>
                    </label>
                    <label class="radio-label">
                        <input type="radio" name="date-style" value="calendar">
                        <span>日历样式</span>
                    </label>
                </div>
            </div>
            <div class="form-group">
                <label for="footer-text">底部引流文案 (可选)</label>
                <input type="text" id="footer-text" placeholder="留空则不显示" value="扫码AI新动向社群">
            </div>
            <div class="form-group">
                <label for="qr-code">上传二维码 (可选，建议200x200px)</label>
                <div class="upload-area">
                    <input type="file" id="qr-code" accept="image/*">
                    <button id="remove-image" class="remove-btn" style="display:none;">× 删除图片</button>
                </div>
            </div>
            <div class="form-group">
                <label for="content">早报内容 (支持Markdown语法)</label>
                <textarea id="content" rows="15"></textarea>
            </div>
            <button id="preview-btn">更新预览</button>
        </div>

        <div class="preview-panel">
            <div id="poster" class="poster date-style-text">
                <div class="poster-header">
                    <div class="title-author-group">
                        <h1 id="poster-title">AI新动向社群早报</h1>
                        <span id="poster-author" class="author"></span>
                    </div>
                    <div id="poster-date-container" class="calendar-date"></div>
                </div>
                <div class="text-date-line">
                    <span id="poster-date-text" class="date-text"></span>
                </div>
                <div class="divider"></div>
                <div id="poster-content" class="poster-content"></div>
                <div class="divider"></div>
                <div class="poster-footer">
                    <span id="poster-footer-text" class="footer-text"></span>
                    <img id="poster-qr-code" class="qr-code" src="" alt="社群二维码" style="display:none;" onerror="this.style.display='none'; this.alt='二维码加载失败';">
                </div>
            </div>
            <button id="save-btn">保存为图片</button>
        </div>
    </div>

    <!-- 添加marked库的备用CDN -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        // 确保marked库已加载
        if (typeof marked === 'undefined') {
            document.write('<script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.0/marked.min.js"><\/script>');
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="script.js" defer></script>
</body>
</html>